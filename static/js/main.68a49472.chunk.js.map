{"version":3,"sources":["Snackbar.js","App.js","index.js"],"names":["SnackbarItem","code","text","setSnackbar","onClose","before","size","style","background","fill","width","height","App","useState","popout","setPopout","link","setLink","button","setButton","useEffect","hash","window","location","slice","length","links","split","className","href","target","cursor","onClick","JsFileDownloader","url","then","data","Snackbar","catch","error","console","log","getFile","activePanel","id","margin","bridge","send","result","marginTop","subscribe","detail","type","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.68a49472.chunk.js","sourcesContent":["import { Snackbar, Avatar } from \"@vkontakte/vkui\"\nimport { Icon16Done } from '@vkontakte/icons';\nimport { Icon20ErrorCircleOutline } from '@vkontakte/icons';\nimport { Icon20WarningTriangleOutline } from '@vkontakte/icons';\n\nconst SnackbarItem = ({code, text, setSnackbar}) => {\n\n    if (code === 'error') {\n        return (\n            <Snackbar\n                onClose={() => setSnackbar(null)}\n                before={\n                    <Avatar\n                        size={24}\n                        style={{ background: \"var(--negative-color)\" }}\n                    >\n                        <Icon20ErrorCircleOutline fill=\"#fff\" width={14} height={14} />\n                    </Avatar>\n                }>{text} </Snackbar>\n        )\n\n    } else if (code === 'warn') {\n        return (\n            <Snackbar\n                onClose={() => setSnackbar(null)}\n                before={\n                    <Avatar\n                        size={24}\n                        style={{ background: \"var(--warn-color\" }}\n                    >\n                    <Icon20WarningTriangleOutline fill=\"#fff\" width={14} height={14} />\n                </Avatar>\n            }>{text} </Snackbar>)\n    } else {\n        return(\n            <Snackbar\n                onClose={() => setSnackbar(null)}\n                before={\n                    <Avatar\n                        size={24}\n                        style={{ background: \"var(--positive-color)\" }}\n                    >\n                        <Icon16Done fill=\"#fff\" width={14} height={14} />\n                    </Avatar>\n                }>{text} </Snackbar>)\n    }\n}\n\n\nexport default SnackbarItem","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {ScreenSpinner, Spinner} from '@vkontakte/vkui';\nimport { View, AdaptivityProvider, AppRoot, Button, Footer, Link, Panel, PanelHeader } from '@vkontakte/vkui';\nimport JsFileDownloader from 'js-file-downloader';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './App.css'\nimport SnackbarItem from './Snackbar';\nimport { Icon28DownloadCloudOutline } from '@vkontakte/icons';\nimport { Icon16WarningTriangle } from '@vkontakte/icons';\n\nconst App = () => {\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tlet [link, setLink] = useState('');\n\tlet [button, setButton] = useState(<Spinner/>)\n\n\tconst getFile = (link) => {\n\t\tnew JsFileDownloader({ \n\t\t\turl: link\n\t\t  })\n\t\t  .then(function (data) {\n\t\t\tsetPopout(<SnackbarItem code='success' text='Сообщение загружено!' setSnackbar={setPopout}/>)\n\t\t  })\n\t\t  .catch(function (error) {\n\t\t\tconsole.log(error);\n\t\t\tsetPopout(<SnackbarItem code='error' text='Произошла ошибка!' setSnackbar={setPopout}/>)\n\t\t  });\n\t}\n\n\tconst copy = () => {\n\t\tbridge.send('VKWebAppCopyText', { text: link }).then((data) => { \n\t\t\t  if (data.result) {\n\t\t\t\tsetPopout(<SnackbarItem code='success' text='Ссылка скопирована!' setSnackbar={setPopout}/>)\n\t\t\t  } else {\n\t\t\t\tsetPopout(<SnackbarItem code='success' text='Произошла ошибка!' setSnackbar={setPopout}/>)\n\t\t\t  }\n\t\t\t}).catch((error) => {\n\t\t\t  console.log(error);\n\t\t\t});\n\t}\n\n\tuseEffect(() => {\n\t\tsetPopout(null)\n\t\tlet hash = window.location.hash.slice(1, window.location.hash.length)\n\t\tif (!hash) { hash = ' & '}\n\t\tlet links = hash.split('&')\n\t\t\n\t\tif (links[1].length < 10) {\n\t\t\tsetButton(<div className='downloand-error'>\n\t\t\t\tПерешлите <Link href='https://vk.com/voice_downloader' target='_blank'>боту</Link> голосовое сообщение и перейдите по полученой ссылке\n\t\t\t</div>)\n\t\t} else {\n\t\t\tsetButton(<div className='downloand'>\n\t\t\t<Icon28DownloadCloudOutline style={{cursor: 'pointer'}} onClick={() => {getFile(links[1])}} width={100} height={100}/>\n\t\t\t\tСкачать\n\t\t\t</div>)\n\t\t}\n\t\tsetLink(links[1])\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconsole.log('ok');\n\t}, [button])\n\n\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<View activePanel='home' popout={popout}>\n\t\t\t\t\t<Panel id='home'>\n\t\t\t\t\t\t<PanelHeader>Voice Downloader</PanelHeader>\n\n\t\t\t\t\t\t<div className='main'>\n\t\t\t\t\t\t\t<div className='success'>\n\t\t\t\t\t\t\t\t<Icon28DownloadCloudOutline width={34} height='34' style={{margin: '0 auto'}}/>\n\t\t\t\t\t\t\t\tВы скачиваете голосовое сообщение, нажмите на кнопку \"скачать\" и загрузка начнется автоматически!\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='warn'>\n\t\t\t\t\t\t\t<Icon16WarningTriangle width={34} height='34' style={{margin: '0 auto'}}/>\n\t\t\t\t\t\t\tОбратите внимание что не на всех устройствах доступна загрузка! Не работает на IOS и еще некоторых ОС\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{button}\n\n\t\t\t\t\t\t{link.length > 10 ? <div>\n\t\t\t\t\t\t\t<div className='link'>\n\t\t\t\t\t\t\tПрямая ссылка на сообщение: <Link href={link} target=\"_blank\">{link}</Link>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='link'>\n\t\t\t\t\t\t\t<Button size='s' onClick={copy}>Скопировать ссылку</Button>\n\t\t\t\t\t\t</div> \n\t\t\t\t\t\t</div> : <div style={{marginTop: 20}} className='downloand-error'>Сылка на скачивание не найдена!</div>}\n\n\t\t\t\t\t\t<Footer>Made by <Link href='https://хор-енотов.рф'>XOP EHOTOB</Link></Footer>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\nbridge.subscribe(({ detail: { type, data }}) => {\n  if (type === 'VKWebAppUpdateConfig') {\n    const schemeAttribute = document.createAttribute('scheme');\n    schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n    document.body.attributes.setNamedItem(schemeAttribute);\n  }\n});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}